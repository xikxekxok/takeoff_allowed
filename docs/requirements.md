# Takeoff Allowed
Много лет я хочу сделать какой-нибудь клевый петпроект, который принесет мне удовольствие и при разработке, и при использовании. Запрограммировать настольную игру - идеальное решение. Поэтому в этом проекте необходимо реализовать небезысвестную настольную игру, в переводе на английский называющуюся "Takeoff Allowed"

> Перед чтением требований лучше почитать правила игры. Иначе будет не очень понятно, о чем вообще речь :)

## Лобби
* **[US-010]** Аутентификация пользователей должен осуществляться через различные сторонние провайдеры
  * **[US-011]** Первым делом необходимо сделать вход через VK
* **[US-020]** Пользователи должны иметь возможность сыграть игру, о которой предварительно договорились где-то еще
  * **[US-021]** Игроки должны сами выбрать "owner-а", который будет создавать игру  
  * **[US-022]** После того, как owner создал игру, он должен получить ссылку, по которой остальные игроки должны перейти для подключения
* **[US-030]** пользователи должны иметь возможность присоединиться к игре по ссылке, формируемой после создания игры
  * **[US-031]** Нельзя присоединиться к игре, если превышено максимальное количество игроков
  * **[US-032]** Для того, чтобы присоединиться к игре, пользователь должен быть аутентифицирован
* **[US-040]** Каждый игрок может выбрать, за какой цвет он будет играть
  * **[US-041]** Игрок может не выбирать цвет - тогда перед началом игры система должна назначить ему цвет из свободных
  * **[US-042]** Нельзя выбрать цвет, выбранный другим игроком
* **[US-050]** После выбора цвета игрок должен подтвердить свою готовность к началу игры
* **[US-060]** После того, как все игроки подтвердят готовность - овнер может начать игру
  * **[US-061]** Нельзя начать игру, если нет хотя бы 2х игроков
  * **[US-062]** Если в игре максимальное количество игроков, и все они подтвердили готовность - игра должна начаться автоматически
* **[US-070]** Если игрок передумал, до начала игры он может отменить свою готовность и поменять выбор цвета

## Партия
* **[US-080]** игра осуществляется по оригинальным правилам настольной игры. Система должна следить за их выполнением
* **[US-090]** каждой игрок видит только свои карты. для карт других игроков он видит только рубашки
* **[US-100]** Пользователь должен видеть текущее состояние игры: чей ход, игровой стол, свои карты на руке
* **[US-110]** в свой ход пользователь должен видеть, какие действия он может сделать
* **[US-120]** игроки должны видеть лог с игровыми действиями. 
  * Если действие выполнено взакрытую, его детали должен видеть только сам игрок, который его делал. Остальные должны видеть в логе только факт его выполнения
* **[US-130]** по взаимной договоренности пользователей правила игры можно нарушать
  * **[US-131]** пользователь может инициировать "внеигровое" изменение состояния игры: передвинуть самолеты, убрать карту с руки, добавить на руку карту итп.
  * **[US-132]** все остальные игроки должны подтвердить, что согласны с таким изменением
  * **[US-133]** такое изменение должно подробно отражаться в логе
* **[US-140]** по взаимной договоренности пользователей можно отменять ходы
 * **[US-141]** пользователь может инициировать отмену хода (одного или нескольких)
 * **[US-142]** остальные игроки должны это подтвердить
 * **[US-143]** отмена хода должна отображаться в логе
* **[US-150]** игроки должны иметь возможность отправлять сообщения другим игрокам
  * **[US-151]** сообщения должны отображаться в логе игры

## Прочее
* **[US-160]** При создании игры owner может указывать ограничение времени на ход
  * **[US-161]** Когда время истекает, пользователь автоматически удаляется из игры: все его самолеты исчезают с поля, карты замешиваются в колоду. Ход переходит следующему игроку
  * **[US-162]** Если в игре остался один игрок - он объявляется победителем
  * **[US-163]** Можно создать игру без ограничения времени на ход
* **[US-170]** после завершения игры она должна вноситься в игровую статистику всех игроков
  * **[US-171]** если игрок был удален из игры за превышение времени хода - это считается поражением
  * **[US-172]** если игрок остался последним в игре (остальные были удалены) - это считается победой
* **[US-180]** система должна формировать рейтинг игроков, доступный любому пользователю
* **[US-190]** пользователь должен иметь возможность просмотреть историю игр любого пользователя
  * **[US-191]** при просмотре конректной игры должно быть доступно перемещение по времени самой игры: на ход вперед, на ход назад, к конкретному моменту игры
  * **[US-192]** в истории должны быть доступны как завершенные игры, так и текущие
* **[US-200]** пользователь должен видеть свои текущие игры (включая неначатые), и иметь возможность к ним вернуться
* **[US-210]** овнер должен иметь возможность создать "приватную игру"
  * **[US-211]** приватная игра не должна вноситься в статистику
  * **[US-212]** в истории игр приватную игру должны видеть только её участники
* **[US-220]** Игра должна храниться в приложении бессрочное количество времени. Пользователи всегда должны иметь возможность к ней вернуться, чтобы изучить или продолжить партию
* **[US-230]** Обновления игры должны получаться пользователем без обновления страницы браузера

> тут, конечно, каша - криво разбито по модулям, смешаны ФТ и НФТ. Но я все-таки не аналитик. И мне кажется, такое ТЗ вполне реалистично :) Порядок будем наводить дальше, на диаграммах типа ES
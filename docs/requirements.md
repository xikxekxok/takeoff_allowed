# Takeoff Allowed
Много лет я хочу сделать какой-нибудь клевый петпроект, который принесет мне удовольствие и при разработке, и при использовании. Запрограммировать настольную игру - идеальное решение. Поэтому в этом проекте необходимо реализовать небезысвестную настольную игру, в переводе на английский называющуюся "Takeoff Allowed"

> Перед чтением требований лучше почитать правила игры. Иначе будет не очень понятно, о чем вообще речь :)
## Стейкхолдеры и их консерны
### Игроки
* **[C-100]** Хотят получать игровой опыт, схожий с оффлайн версией игры
* **[C-110]** Новые игроки должны как можно реже покидать игру до начала партии со словами "капец тут сложно, давай лучше в гости приезжай"
### Бекендер
Который будет писать и поддерживать игру.
* **[C-200]** Процесс разработки должен приносить кайф - только ради него все это и делается
* **[C-210]** Хостинг игры должен быть простым, дешевым и надежным (не требующим внимания)
* **[C-220]** Хочется опробовать то новое, чему научился за последнее время - Event Storming, консерны, quality attributes etc
* **[C-230]** Нарисовать проектик для портфолио
### Фронтендер
* **[C-300]** Пощупать новые необычные технологии
* **[C-310]** Нарисовать проектик для портфолио
### Семейный юрист
* **[C-400]** Избежать проблем с авторским правом, потому что разгребать их придется ему

## Техническое задание
### Лобби
* **[US-010]** Аутентификация пользователей должен осуществляться через различные сторонние провайдеры
  * **[US-011]** Первым делом необходимо сделать вход через VK
  * **[US-012]** При первом входе в систему пользователь должен выбрать: использовать реальное имя или какой-то другой ник (тогда его надо указать)
  * **[US-013]** Нужна возможность изменить этот выбор позже
* **[US-020]** Пользователи должны иметь возможность сыграть игру, о которой предварительно договорились где-то еще
  * **[US-021]** Игроки должны сами выбрать "owner-а", который будет создавать игру (вне приложения)
  * **[US-022]** После того, как owner создал игру, он должен получить ссылку, по которой остальные игроки должны перейти для подключения
* **[US-030]** пользователи должны иметь возможность присоединиться к игре по ссылке, формируемой после создания игры
  * **[US-031]** Нельзя присоединиться к игре, если превышено максимальное количество игроков
  * **[US-032]** Для того, чтобы присоединиться к игре, пользователь должен быть аутентифицирован
* **[US-040]** Каждый игрок может выбрать, за какой цвет он будет играть
  * **[US-041]** Игрок может не выбирать цвет - тогда перед началом игры система должна назначить ему цвет из свободных
  * **[US-042]** Нельзя выбрать цвет, выбранный другим игроком
* **[US-050]** После выбора цвета игрок должен подтвердить свою готовность к началу игры
* **[US-060]** После того, как все игроки подтвердят готовность - овнер может начать игру
  * **[US-061]** Нельзя начать игру, если нет хотя бы 2х игроков
  * **[US-062]** Если в игре максимальное количество игроков, и все они подтвердили готовность - игра должна начаться автоматически
* **[US-070]** Если игрок передумал, до начала игры он может отменить свою готовность и поменять выбор цвета

### Партия
* **[US-080]** Игра осуществляется по оригинальным правилам настольной игры. Система должна следить за их выполнением
* **[US-090]** Каждый игрок видит только свои карты. Для карт других игроков он видит только рубашки
* **[US-100]** Пользователь должен видеть текущее состояние игры: чей ход, игровой стол, свои карты на руке
* ~~**[US-110]** В свой ход пользователь должен видеть, какие действия он может сделать~~ Это требование противоречит **[C-100]**. Потом вернем как доп механизм 
* **[US-120]** Игроки должны видеть лог с игровыми действиями. 
  * **[US-121]** Если действие выполнено взакрытую, его детали должен видеть только сам игрок, который его делал. Остальные должны видеть в логе только факт его выполнения
* **[US-130]** По взаимной договоренности пользователей правила игры можно нарушать
  * **[US-131]** Пользователь может инициировать "внеигровое" изменение состояния игры: передвинуть самолеты, убрать карту с руки, добавить на руку карту итп.
  * **[US-132]** Все остальные игроки должны подтвердить, что согласны с таким изменением
  * **[US-133]** Такое изменение должно подробно отражаться в логе
* **[US-140]** По взаимной договоренности пользователей можно отменять ходы
  * **[US-141]** Пользователь может инициировать отмену хода (одного или нескольких)
  * **[US-142]** Остальные игроки должны это подтвердить
  * **[US-143]** Отмена хода должна отображаться в логе
* **[US-150]** Игроки должны иметь возможность отправлять сообщения другим игрокам
  * **[US-151]** Сообщения должны отображаться в логе игры

### Прочее
* **[US-160]** При создании игры owner может указывать ограничение времени на ход
  * **[US-161]** Когда время истекает, пользователь автоматически удаляется из игры: все его самолеты исчезают с поля, карты замешиваются в колоду. Ход переходит следующему игроку
  * **[US-162]** Если в игре остался один игрок - он объявляется победителем
  * **[US-163]** Можно создать игру без ограничения времени на ход
* **[US-170]** После завершения игры она должна вноситься в игровую статистику всех игроков
  * **[US-171]** Если игрок был удален из игры за превышение времени хода - это считается поражением
  * **[US-172]** Если игрок остался последним в игре (остальные были удалены) - это считается победой
* **[US-180]** Система должна формировать рейтинг игроков, доступный любому пользователю
* **[US-190]** Пользователь должен иметь возможность просмотреть историю игр любого пользователя
  * **[US-191]** При просмотре конректной игры должно быть доступно перемещение по времени самой игры: на ход вперед, на ход назад, к конкретному моменту игры
  * **[US-192]** В истории должны быть доступны как завершенные игры, так и текущие
* **[US-200]** Пользователь должен видеть свои текущие игры (включая неначатые), и иметь возможность к ним вернуться
* **[US-210]** Овнер должен иметь возможность создать "приватную игру"
  * **[US-211]** Приватная игра не должна вноситься в статистику
  * **[US-212]** В истории игр приватную игру должны видеть только её участники
* **[US-220]** Игра должна храниться в приложении бессрочное количество времени. Пользователи всегда должны иметь возможность к ней вернуться, чтобы изучить или продолжить партию
* **[US-230]** Обновления игры должны получаться пользователем без обновления страницы браузера